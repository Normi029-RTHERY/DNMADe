<!-- LES PIEDS SUIVENT MAINS -->
<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
        <script src="https://cdn.rawgit.com/elbobo/aframe-multisrc-component/b6d23310/dist/0.3/aframe-multisrc-component.js"></script>
        <script src="myutils.js"></script>
    </head>

    <body>
        <a-scene>
            <a-sky src="./images/sky.jpg"></a-sky>

            <a-assets>
                <a-asset-item id="leftfoot" src="../modeles/piedgauche.glb"></a-asset-item>
                <a-asset-item id="rightfoot" src="../modeles/pieddroite.glb"></a-asset-item>
                <img id="stonemap" src="../modeles/TexturesCom_Rock_CaveWall_B_2.5x2.5_1K_normal.png"></img>
                <img id="stonetexture" src="../modeles/132392_header_small.jpg"></img>
                <a-mixin id="top_spike" geometry="primitive: box; height: 1; depth: 0.2; width: 0.2 src:#stonetexture" material="src:#stonetexture; repeat:0.1 0.5;"></a-mixin>
                <a-mixin id="middle_spike" geometry="primitive: box; height: 1; depth: 0.1; width: 0.1 src:#stonetexture" material="src:#stonetexture; repeat:0.1 0.5;"></a-mixin>
                <a-mixin id="bottom_spike" geometry="primitive: box; height: 1; depth: 0.05; width: 0.05 src:#stonetexture" material="src:#stonetexture; repeat:0.1 0.5;"></a-mixin>
            </a-assets>

            <!-- INSEREZ VOTRE ENVIRONNEMENT, CI-DESSOUS ... -->
            <a-sky src="./images/sky.jpg"></a-sky>

            <a-plane rotation="-90 0 0" width="4" height="4"></a-plane>
      
            <a-entity position="0 0 2">
              <a-entity mixin="top_spike" position="0 -0.5 -0.2">
                  <a-entity mixin="middle_spike" position="0 -1"></a-entity>
                  <a-entity mixin="bottom_spike" position="0 -2"></a-entity>
              </a-entity>
              <a-entity mixin="top_spike" position="-0.2 -0.5 -1.2">
                  <a-entity mixin="middle_spike" position="0 -1"></a-entity>
                  <a-entity mixin="bottom_spike" position="0 -2"></a-entity>
              </a-entity>
              <a-entity mixin="top_spike" position="-1 -0.5 -2.2">
                  <a-entity mixin="middle_spike" position="0 -1"></a-entity>
                  <a-entity mixin="bottom_spike" position="0 -2"></a-entity>
              </a-entity>
              <a-entity mixin="top_spike" position="-1.6 -0.5 -2.8">
                  <a-entity mixin="middle_spike" position="0 -1"></a-entity>
                  <a-entity mixin="bottom_spike" position="0 -2"></a-entity>
              </a-entity>
              <a-entity mixin="top_spike" position="-1.1 -0.5 -3.9">
                  <a-entity mixin="middle_spike" position="0 -1"></a-entity>
                  <a-entity mixin="bottom_spike" position="0 -2"></a-entity>
              </a-entity>
              <a-entity mixin="top_spike" position="-0.2 -0.5 -3.6">
                  <a-entity mixin="middle_spike" position="0 -1"></a-entity>
                  <a-entity mixin="bottom_spike" position="0 -2"></a-entity>
              </a-entity>
              <a-entity mixin="top_spike" position="1.4 -0.5 -3.4">
                  <a-entity mixin="middle_spike" position="0 -1"></a-entity>
                  <a-entity mixin="bottom_spike" position="0 -2"></a-entity>
              </a-entity>
              <a-entity mixin="top_spike" position="2 -0.5 -2.1">
                  <a-entity mixin="middle_spike" position="0 -1"></a-entity>
                  <a-entity mixin="bottom_spike" position="0 -2"></a-entity>
              </a-entity>
      
              <a-entity Animation="property:rotation; easing: linear; loop: true; dur: 11000; to: 0 360 0">
                <a-entity mixin="middle_spike" position="5 -2 3" animation="property: position; to: 5 4 3 ; dur: 1860; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="middle_spike" position="-6 2 -7" animation="property: position; to: -6 5 -7 ; dur: 1100; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="middle_spike" position="-4 -1 5" animation="property: position; to: -4 3 5 ; dur: 1200; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="middle_spike" position="3 3 -4" animation="property: position; to: 3 5 -4 ; dur: 3100; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="middle_spike" position="-2 -1 -8" animation="property: position; to: -2 4 -8 ; dur: 1400; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="middle_spike" position="-8 1.5 -1.2" animation="property: position; to: -8 4 -1.2 ; dur: 1024; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="middle_spike" position="3 1.5 4.2" animation="property: position; to: 3 2.5 3.2 ; dur: 1024; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
              </a-entity>
      
              <a-entity Animation="property:rotation; easing: linear; loop: true; dur: 9500; to: 0 360 0">
                <a-entity mixin="bottom_spike" position="-4.6 -3 2" animation="property: position; to: -4.6 -0.2 2 ; dur: 3210; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="bottom_spike" position="-3.4 -4.2 -5.4" animation="property: position; to: -3.4 -1 -5.4 ; dur: 900; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="bottom_spike" position="4 -2 -3.5" animation="property: position; to: 4 2 -3.5 ; dur: 2000; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="bottom_spike" position="0.3 1.8 -7" animation="property: position; to: 0.3 6.1 -7 ; dur: 2200; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="bottom_spike" position="6 1 1.1" animation="property: position; to: 6 2.7 1.1 ; dur: 3600; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
                <a-entity mixin="bottom_spike" position="1.5 1.7 2.2" animation="property: position; to: 1.5 3.9 2.2 ; dur: 1512; dir: alternate; easing: easeInOutSine  ; loop: true;"></a-entity>
              </a-entity>
      
              <a-entity Animation="property:rotation; easing: linear; loop: true; dur: 8000; to: 0 360 0">
                <a-entity mixin="middle_spike" position="-3 0.5 2" animation="property: position; to: -3 3.6 2 ; dur: 2230; dir: alternate; easing: easeInOutSine  ; loop: true;">
                  <a-entity mixin="bottom_spike" position="0 -1"></a-entity>
                </a-entity>
                <a-entity mixin="middle_spike" position="3.4 1.2 -3.8" animation="property: position; to: 3.4 3.5 -3.8 ; dur: 1760; dir: alternate; easing: easeInOutSine  ; loop: true;">
                  <a-entity mixin="bottom_spike" position="0 -1"></a-entity>
                </a-entity>
                <a-entity mixin="middle_spike" position="4 -1 2" animation="property: position; to: 4 2.1 2; dur: 2540; dir: alternate; easing: easeInOutSine  ; loop: true;">
                  <a-entity mixin="bottom_spike" position="0 -1"></a-entity>
                </a-entity>
              </a-entity>
            </a-entity>

            <!-- ... JUSQUE CI-DESSUS -->

            <!-- PLAYER -->
            <a-entity id="cameraRig">
                
                <!-- TETE -->
                <a-entity id="tete" camera position="0 1.60 0" 
                        look-controls wasd-controls>
                </a-entity>

                <!-- LEFT HAND -->
                <a-entity id="maingauche" hand-controls="hand: left; handModelStyle: lowPoly; color: #ffcccc">
                </a-entity>

                <!-- RIGHT HAND -->
                <a-entity id="maindroite" hand-controls="hand: right; handModelStyle: lowPoly; color: #ffcccc">
                </a-entity>

                <!-- PIEDS -->
                <a-entity id="piedgauche" gltf-model="#leftfoot" 
                        rotation="-90 0 180"
                        follow-head-rotation="trace: false" follow-hand-position>
                </a-entity>
                <a-entity id="pieddroite" gltf-model="#rightfoot" 
                        rotation="-90 0 180"
                        follow-head-rotation="trace: false" follow-hand-position>
                </a-entity>

            </a-entity>

        </a-scene>
    
    </body>
</html>